There should be a way in which parents can choose the techniques to talk to their kids about gender in an age-appropriate manner.
So how would parents teach a child who is not that smart enough to understand their gender roles?

There are many ways, like choosing books as a medium to make them learn; a book that offers characters that don't conform to gender norms. Children would understand and create role models that would motivate them to expand their imagination and choose diverse ways to express themselves.
Different books are available that question gender conformities by affirming that any identity is accepted and appreciated.

More than this, it could be parents themselves who can build a gender-neutral surrounding, like teaching their children through small things when they're choosing to buy a toy or anything that is gender specific.

Most importantly, it could be done by not scolding or limiting them if they choose something against the gender rules.
It is the duty of parents to encourage their kids in every way possible to make them feel liberated and comfortable.